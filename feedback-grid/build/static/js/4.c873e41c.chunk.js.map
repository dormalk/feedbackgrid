{"version":3,"sources":["helpers/uid.js","helpers/text.js","pages/GridView/components/AddInput/AddInput.js","pages/GridView/components/Reactions/Reactions.js","pages/GridView/components/Feedback/Feedback.js","pages/GridView/components/Col/Col.js","hooks/grid-hook.js","pages/GridView/components/Grid/Grid.js","pages/GridView/GridView.js"],"names":["generateUid","Math","random","toString","substr","getMyUid","myUid","localStorage","getItem","newUid","setItem","isRTL","s","RegExp","test","iconPath","AddInput","className","onNew","useState","isOpen","setIsOpen","inputRef","useRef","inputValue","setInputValue","handleSend","event","preventDefault","stopPropagation","type","style","direction","ref","placeholder","value","onKeyUp","keyCode","onChange","target","onBlur","setTimeout","src","alt","onMouseDown","current","focus","Reactions","dislikes","loves","celebrates","evils","onPick","onClick","Feedback","reactions","onReaction","createdBy","onDelete","React","myVote","setMyVote","right","left","reaction","Col","title","icon","onUpdate","feedbacks","bodyRef","map","item","index","newItems","splice","handleDelete","createBy","handleReactions","createdItem","updatedItems","concat","scrollTop","scrollHeight","socket","socketIOClient","process","useGrid","gid","gridId","setGridId","gridCols","setGridCols","isLoading","setIsLoading","errorMessage","setErrorMessage","mode","URLSearchParams","useLocation","search","get","navigate","useNavigate","fetchGrid","useCallback","fetch","then","res","json","grid","cols","catch","err","updateErrorMessage","finally","initGrid","emit","on","requestedSocket","id","useEffect","onColUpdate","tempCols","col","find","name","method","body","JSON","stringify","headers","console","log","msg","findCol","ColsData","DELTEA","window","innerWidth","Grid","useParams","gridRef","handleEndTouch","scrollLeft","currentOffset","currentCol","floor","scrollTo","behavior","addEventListener","Fragment","error","GridView","Header"],"mappings":"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","file":"static/js/4.c873e41c.chunk.js","sourcesContent":["export const generateUid = () => {\r\n    return Math.random().toString(36).substr(2, 9);\r\n}\r\n\r\nexport const getMyUid = () => {\r\n    const myUid = localStorage.getItem('myUid');\r\n    if (myUid) {\r\n        return myUid;\r\n    } else {\r\n        const newUid = generateUid();\r\n        localStorage.setItem('myUid', newUid);\r\n        return newUid;\r\n    }\r\n}\r\n\r\nexport default generateUid;","\r\nexport const isRTL = (s) => {\r\n    var ltrChars    = 'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF'+'\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF',\r\n    rtlChars    = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC',\r\n    rtlDirCheck = new RegExp('^[^'+ltrChars+']*['+rtlChars+']');\r\n    return rtlDirCheck.test(s);\r\n}","import React,{useState, useRef} from \"react\";\r\nimport './AddInput.css'\r\nimport { isRTL } from \"../../../../helpers/text\";\r\n\r\nconst iconPath = process.env.PUBLIC_URL + '/assets/icons/';\r\n\r\nconst AddInput = ({className, onNew}) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const inputRef = useRef(null);\r\n    const [inputValue, setInputValue] = useState('');\r\n\r\n    const handleClickPlus = (event) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        setIsOpen(true);\r\n        inputRef.current.focus();\r\n    }\r\n\r\n    const handleSend = (event) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        onNew(inputValue);\r\n        setInputValue('')\r\n    }\r\n\r\n    const handleChangeInput = (event) => {\r\n        setInputValue(event.target.value);\r\n    }\r\n\r\n    const onKeyUpHandler = (event) => {\r\n        if(event.keyCode === 13) {\r\n            handleSend(event);\r\n        }\r\n    }\r\n\r\n\r\n    return <div className={`wrapper ${className}`}>\r\n        <div className={`input-wrapper ${isOpen ? 'open' : ''}`}>\r\n            <input  type=\"text\" \r\n                    style={{direction: isRTL(inputValue) ? 'rtl' : 'ltr'}}\r\n                    ref={inputRef}\r\n                    placeholder=\"Add new item\" \r\n                    value={inputValue}\r\n                    onKeyUp={onKeyUpHandler}\r\n                    onChange={handleChangeInput}\r\n                    onBlur={() => setTimeout(() => setIsOpen(false), 200)}\r\n                    className=\"c-input\"/>\r\n        </div>\r\n        {\r\n            isOpen ? \r\n            <img    src={`${iconPath}send.png`} \r\n                    alt=\"\" \r\n                    onMouseDown={handleSend}\r\n                    className=\"send-btn\"/>:\r\n            <img    src={`${iconPath}plus.png`} \r\n                    alt=\"\" \r\n                    onMouseDown={handleClickPlus}\r\n                    className=\"new-btn\"/>\r\n        }\r\n    </div>\r\n}\r\n\r\nexport default AddInput;","import React from 'react';\r\nimport './Reactions.css'\r\nconst iconPath = process.env.PUBLIC_URL + '/assets/icons/';\r\n\r\n\r\nconst Reactions = ({dislikes,loves,celebrates,evils, onPick}) => {\r\n    return <div className=\"reactions\">\r\n\r\n        <div className=\"reaction\" onClick={()=>onPick('loves')}>\r\n            <span>{loves}</span>\r\n            <img    src={`${iconPath}heart-color.png`} \r\n                    alt=\"heart\"/>\r\n        </div>\r\n        <div className=\"reaction\" onClick={()=>onPick('dislikes')}>\r\n            <span>{dislikes}</span>\r\n            <img    src={`${iconPath}dislike-color.png`} \r\n                    alt=\"dislike\"/>\r\n        </div>\r\n        <div className=\"reaction\" onClick={()=>onPick('celebrates')}>\r\n            <span>{celebrates}</span>\r\n            <img    src={`${iconPath}confetti-color.png`} \r\n                    alt=\"confetti\"/>\r\n        </div>\r\n        <div className=\"reaction\" onClick={()=>onPick('evils')}>\r\n            <span>{evils}</span>\r\n            <img    src={`${iconPath}devil-color.png`} \r\n                    alt=\"evil\"/>\r\n        </div>\r\n        \r\n    </div>\r\n}\r\n\r\nexport default Reactions;","import React from \"react\";\r\nimport './Feedback.css'\r\nimport Reactions from \"../Reactions/Reactions\";\r\nimport { getMyUid } from \"../../../../helpers/uid\";\r\nimport { isRTL } from \"../../../../helpers/text\";\r\nconst Feedback = ({value, reactions,onReaction,createdBy, onDelete}) => {\r\n    const [myVote, setMyVote] = React.useState('');\r\n    const handleReaction = (reaction) => {\r\n        if(myVote !== ''){\r\n            reactions[myVote]--\r\n        }        \r\n        reactions[reaction]++;\r\n        setMyVote(reaction);\r\n        onReaction(reactions)\r\n\r\n    }\r\n\r\n    return <div className=\"card\" >\r\n        {createdBy === getMyUid() && <div className=\"card-remove\" onClick={onDelete} style={{right: isRTL(value) ? 'unset' : '1rem', left: isRTL(value) ? '1rem' : 'unset'}}>x</div>}\r\n        <div className={`card-body ${isRTL(value) ? 'rtl' : ''}`} >{value}</div>\r\n        <hr/>\r\n        <div className=\"card-footer\">\r\n            <Reactions  evils={reactions.evils} \r\n                        dislikes={reactions.dislikes}\r\n                        loves={reactions.loves}\r\n                        onPick={handleReaction}\r\n                        celebrates={reactions.celebrates}/>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Feedback;","import React,{useRef} from \"react\";\r\nimport AddInput from \"../AddInput/AddInput\";\r\nimport Card from \"../Feedback/Feedback\";\r\nimport './Col.css'\r\nimport {getMyUid} from \"../../../../helpers/uid\";\r\nconst iconPath = process.env.PUBLIC_URL + '/assets/icons/';\r\n\r\nconst Col = ({title, icon, onUpdate,feedbacks = []}) => {\r\n    const bodyRef = useRef(null);\r\n\r\n    const handleNewItem = (value) => {\r\n        if(value === '') return;\r\n        const createdItem = {\r\n            value,\r\n            createBy: getMyUid(),\r\n            reactions: {\r\n                evils: 0,\r\n                dislikes: 0,\r\n                loves: 0,\r\n                celebrates: 0,\r\n            }\r\n        }\r\n        const updatedItems = feedbacks.concat(createdItem); \r\n        setTimeout(() => {\r\n            bodyRef.current.scrollTop = bodyRef.current.scrollHeight;\r\n        })\r\n        onUpdate(updatedItems);\r\n    }\r\n\r\n    const handleReactions = (reaction,index) => {\r\n        const newItems = [...feedbacks];\r\n        newItems[index].reactions[reaction] = newItems[index].reactions[reaction] + 1;\r\n        onUpdate(newItems);\r\n    }\r\n\r\n    const handleDelete = (index) => {\r\n        const newItems = [...feedbacks];\r\n        newItems.splice(index,1);\r\n        onUpdate(newItems);\r\n    }\r\n    \r\n    return <div className=\"col\">\r\n        <div className=\"top\">\r\n            <img src={`${iconPath}${icon}.png`} alt=\"\" className=\"icon\"/>\r\n            <div className=\"title\">{title}</div>\r\n        </div>\r\n        <div className=\"body\" ref={bodyRef}>\r\n            {feedbacks.map((item, index) => <Card   value={item.value}\r\n                                                key={index}\r\n                                                onDelete={() => handleDelete(index)}\r\n                                                createdBy={item.createBy}\r\n                                                reactions={item.reactions}\r\n                                                onReaction={(value) => handleReactions(value,index)}/>)}\r\n        </div>\r\n        <div className=\"footer\">\r\n            <AddInput className=\"add-input\" onNew={handleNewItem}/>\r\n        </div>\r\n    </div>\r\n};\r\n\r\nexport default Col;","import {useState,useEffect,useCallback} from 'react';\r\nimport { useLocation } from 'react-router';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport socketIOClient from \"socket.io-client\";\r\nconst socket = socketIOClient(process.env.REACT_APP_BACKEND_URL);\r\n\r\n\r\nconst useGrid = (gid) => {\r\n    const [gridId, setGridId] = useState();\r\n    const [gridCols, setGridCols] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [errorMessage, setErrorMessage] = useState();\r\n    const mode = new URLSearchParams(useLocation().search).get('mode');\r\n    let navigate = useNavigate();\r\n    const fetchGrid = useCallback((gid) => {\r\n        fetch(`${process.env.REACT_APP_BACKEND_URL}/api/grid/${gid}`)\r\n        .then(res => res.json())\r\n        .then(res => {\r\n            setGridCols(res.grid.cols)\r\n        })\r\n        .catch(err => {\r\n            if(mode === 'new') updateErrorMessage('We Could not fetch grid, please check you connection');\r\n            else if(mode === 'join') navigate('/');\r\n        })\r\n        .finally(() => setIsLoading(false))\r\n    },[mode,navigate])\r\n\r\n    const initGrid = useCallback(() => {\r\n        if(gid !== null) {\r\n            setGridId(gid)\r\n            fetchGrid(gid);\r\n            socket.emit('joinRoom', gid);\r\n    \r\n            socket.on(\"fetchGrid\", requestedSocket => {\r\n                if(socket.id === requestedSocket) return;\r\n                fetchGrid(gid);\r\n            });\r\n        } else {\r\n            updateErrorMessage(\"Grid not found\");\r\n        }\r\n    },[gid,fetchGrid]);\r\n\r\n    useEffect(() => {\r\n        initGrid();\r\n    },[initGrid])\r\n\r\n    \r\n\r\n \r\n\r\n    const findCol = (id) => {\r\n        const col = gridCols.find(col => col.name === id)\r\n        if(col) return col.feedbacks;\r\n        return []\r\n    }\r\n\r\n    const onColUpdate = useCallback((id, feedbacks) => {\r\n        const tempCols = gridCols; \r\n        const col = tempCols.find(col => col.name === id)\r\n        if(col) {\r\n            setGridCols([...tempCols])\r\n            col.feedbacks = feedbacks;\r\n            fetch(`${process.env.REACT_APP_BACKEND_URL}/api/grid/${gridId}`, {\r\n                method: 'POST',\r\n                body: JSON.stringify({\r\n                    grid: {\r\n                        cols: tempCols\r\n                    }}),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                socket.emit('fetchGridRequest', gridId);\r\n            })\r\n            .catch(err => console.log(err))\r\n        }\r\n    },[gridCols, gridId])\r\n\r\n\r\n    const updateErrorMessage = (msg) => {\r\n        setErrorMessage(msg);\r\n        setTimeout(() => {\r\n            setErrorMessage(null);\r\n        },3000)\r\n    }\r\n\r\n    return {isLoading, findCol, onColUpdate, errorMessage}\r\n}\r\n\r\n\r\nexport default useGrid;","import React,{useRef, useCallback} from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport Col from \"../Col/Col\";\r\nimport './Grid.css'\r\nimport useGrid from \"../../../../hooks/grid-hook\";\r\nimport { ErrorSnack } from \"../../../../shared/components\";\r\n\r\n\r\nconst ColsData = [\r\n    {\r\n        title: \"Things I Loves\",\r\n        icon: \"heart\",\r\n        id: \"things_love\",\r\n    },\r\n    {\r\n        title: \"Things I dislike\",\r\n        icon: \"dislike\",\r\n        id: \"things_dislike\",\r\n    },\r\n    {\r\n        title: \"Things I wants to improves\",\r\n        icon: \"improve\",\r\n        id: \"things_improve\",\r\n    },\r\n    {\r\n        title: \"New things I have\",\r\n        icon: \"innovation\",\r\n        id: \"things_new\",\r\n    },\r\n]\r\n\r\nconst DELTEA = window.innerWidth / 2;\r\n\r\nconst Grid = () => {\r\n    const { gid } = useParams();\r\n    const gridRef = useRef(null);\r\n    const {isLoading, findCol, onColUpdate,errorMessage} = useGrid(gid);\r\n    \r\n    const handleEndTouch = useCallback(event => {\r\n        const { scrollLeft } = gridRef.current;\r\n        const currentOffset = scrollLeft % window.innerWidth;\r\n        const currentCol = Math.floor(scrollLeft / window.innerWidth);\r\n\r\n        if(currentOffset > DELTEA){\r\n            gridRef.current.scrollTo({\r\n                left: (currentCol + 1) * window.innerWidth,\r\n                behavior: 'smooth'\r\n            });\r\n        } else {\r\n            gridRef.current.scrollTo({\r\n                left: currentCol * window.innerWidth,\r\n                behavior: 'smooth'\r\n            });\r\n        }\r\n\r\n    },[])\r\n    React.useEffect(() => {\r\n        gridRef.current.addEventListener(\"touchend\", handleEndTouch)\r\n        gridRef.current.scrollLeft = 0;\r\n    },[handleEndTouch])\r\n\r\n    return <React.Fragment>\r\n        <div className=\"grid\" ref={gridRef}>\r\n        {isLoading ?    <div className=\"loader\"></div> :\r\n                            ColsData.map(col => <Col    key={col.id}\r\n                                                        title={col.title}\r\n                                                        icon={col.icon}\r\n                                                        onUpdate={(feedbacks) => onColUpdate(col.id,feedbacks)}\r\n                                                        feedbacks={findCol(col.id)}/>)}\r\n        </div>\r\n        <ErrorSnack error={errorMessage}/>\r\n        </React.Fragment>\r\n};\r\n\r\nexport default Grid;","import React from 'react';\r\nimport Header from '../../shared/components/Header/Header.js';\r\nimport Grid from './components/Grid/Grid.js';\r\n\r\nconst GridView = () => {\r\n    return <React.Fragment>\r\n            <Header />\r\n            <Grid />\r\n    </React.Fragment>\r\n}\r\n\r\nexport default GridView;\r\n"],"sourceRoot":""}