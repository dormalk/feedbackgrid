(this["webpackJsonpfeedback-grid"]=this["webpackJsonpfeedback-grid"]||[]).push([[3],{25:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var c=function(){return Math.random().toString(36).substr(2,9)},i=function(){var e=localStorage.getItem("myUid");if(e)return e;var t=c();return localStorage.setItem("myUid",t),t}},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},50:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),r=(n(35),n(3)),s=function(){return Object(r.jsx)("header",{children:Object(r.jsx)("h1",{className:"logo",children:"FEEDBACK GRID"})})},o=n(1),a=n(33),l=n(4),u=(n(36),function(e){return new RegExp("^[^A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]").test(e)}),d="/assets/icons/",j=function(e){var t=e.className,n=e.onNew,i=Object(c.useState)(!1),s=Object(l.a)(i,2),o=s[0],a=s[1],j=Object(c.useRef)(null),f=Object(c.useState)(""),b=Object(l.a)(f,2),h=b[0],O=b[1],v=function(e){e.preventDefault(),e.stopPropagation(),n(h),O("")};return Object(r.jsxs)("div",{className:"wrapper ".concat(t),children:[Object(r.jsx)("div",{className:"input-wrapper ".concat(o?"open":""),children:Object(r.jsx)("input",{type:"text",style:{direction:u(h)?"rtl":"ltr"},ref:j,placeholder:"Add new item",value:h,onKeyUp:function(e){13===e.keyCode&&v(e)},onChange:function(e){O(e.target.value)},onBlur:function(){return setTimeout((function(){return a(!1)}),200)},className:"c-input"})}),o?Object(r.jsx)("img",{src:"".concat(d,"send.png"),alt:"",onMouseDown:v,className:"send-btn"}):Object(r.jsx)("img",{src:"".concat(d,"plus.png"),alt:"",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),a(!0),j.current.focus()},className:"new-btn"})]})},f=(n(37),n(38),"/assets/icons/"),b=function(e){var t=e.dislikes,n=e.loves,c=e.celebrates,i=e.evils,s=e.onPick;return Object(r.jsxs)("div",{className:"reactions",children:[Object(r.jsxs)("div",{className:"reaction",onClick:function(){return s("loves")},children:[Object(r.jsx)("span",{children:n}),Object(r.jsx)("img",{src:"".concat(f,"heart-color.png"),alt:"heart"})]}),Object(r.jsxs)("div",{className:"reaction",onClick:function(){return s("dislikes")},children:[Object(r.jsx)("span",{children:t}),Object(r.jsx)("img",{src:"".concat(f,"dislike-color.png"),alt:"dislike"})]}),Object(r.jsxs)("div",{className:"reaction",onClick:function(){return s("celebrates")},children:[Object(r.jsx)("span",{children:c}),Object(r.jsx)("img",{src:"".concat(f,"confetti-color.png"),alt:"confetti"})]}),Object(r.jsxs)("div",{className:"reaction",onClick:function(){return s("evils")},children:[Object(r.jsx)("span",{children:i}),Object(r.jsx)("img",{src:"".concat(f,"devil-color.png"),alt:"evil"})]})]})},h=n(25),O=function(e){var t=e.value,n=e.reactions,c=e.onReaction,s=e.createdBy,o=e.onDelete,a=i.a.useState(""),d=Object(l.a)(a,2),j=d[0],f=d[1];return Object(r.jsxs)("div",{className:"card",children:[s===Object(h.b)()&&Object(r.jsx)("div",{className:"card-remove",onClick:o,style:{right:u(t)?"unset":"1rem",left:u(t)?"1rem":"unset"},children:"x"}),Object(r.jsx)("div",{className:"card-body ".concat(u(t)?"rtl":""),children:t}),Object(r.jsx)("hr",{}),Object(r.jsx)("div",{className:"card-footer",children:Object(r.jsx)(b,{evils:n.evils,dislikes:n.dislikes,loves:n.loves,onPick:function(e){""!==j&&n[j]--,n[e]++,f(e),c(n)},celebrates:n.celebrates})})]})},v=(n(39),function(e){var t=e.title,n=e.icon,i=e.onUpdate,s=e.feedbacks,o=void 0===s?[]:s,l=Object(c.useRef)(null);return Object(r.jsxs)("div",{className:"col",children:[Object(r.jsxs)("div",{className:"top",children:[Object(r.jsx)("img",{src:"".concat("/assets/icons/").concat(n,".png"),alt:"",className:"icon"}),Object(r.jsx)("div",{className:"title",children:t})]}),Object(r.jsx)("div",{className:"body",ref:l,children:o.map((function(e,t){return Object(r.jsx)(O,{value:e.value,onDelete:function(){return function(e){var t=Object(a.a)(o);t.splice(e,1),i(t)}(t)},createdBy:e.createBy,reactions:e.reactions,onReaction:function(e){return function(e,t){var n=Object(a.a)(o);n[t].reactions[e]=n[t].reactions[e]+1,i(n)}(e,t)}},t)}))}),Object(r.jsx)("div",{className:"footer",children:Object(r.jsx)(j,{className:"add-input",onNew:function(e){if(""!==e){var t={value:e,createBy:Object(h.b)(),reactions:{evils:0,dislikes:0,loves:0,celebrates:0}},n=o.concat(t);setTimeout((function(){l.current.scrollTop=l.current.scrollHeight})),i(n)}}})})]})}),m=(n(40),n(51)),p=Object(m.a)("https://feedback-grid.herokuapp.com"),g=function(e){var t=Object(c.useState)(),n=Object(l.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)([]),o=Object(l.a)(s,2),u=o[0],d=o[1],j=Object(c.useState)(!0),f=Object(l.a)(j,2),b=f[0],h=f[1],O=Object(c.useState)(),v=Object(l.a)(O,2),m=v[0],g=v[1],x=Object(c.useCallback)((function(e){fetch("".concat("https://feedback-grid.herokuapp.com","/api/grid/").concat(e)).then((function(e){return e.json()})).then((function(e){d(e.grid.cols)})).catch((function(e){return w("We Could not fetch grid, please check you connection")})).finally((function(){return h(!1)}))}),[]),k=Object(c.useCallback)((function(){null!==e?(r(e),x(e),p.emit("joinRoom",e),p.on("fetchGrid",(function(t){p.id!==t&&x(e)}))):w("Grid not found")}),[e,x]);Object(c.useEffect)((function(){k()}),[k]);var N=Object(c.useCallback)((function(e,t){var n=u,c=n.find((function(t){return t.name===e}));c&&(d(Object(a.a)(n)),c.feedbacks=t,fetch("".concat("https://feedback-grid.herokuapp.com","/api/grid/").concat(i),{method:"POST",body:JSON.stringify({grid:{cols:n}}),headers:{"Content-Type":"application/json"}}).then((function(e){p.emit("fetchGridRequest",i)})).catch((function(e){return console.log(e)})))}),[u,i]),w=function(e){g(e),setTimeout((function(){g(null)}),3e3)};return{isLoading:b,findCol:function(e){var t=u.find((function(t){return t.name===e}));return t?t.feedbacks:[]},onColUpdate:N,errorMessage:m}},x=n(8),k=n.n(x),N=(n(50),function(e){var t=e.error;return k.a.createPortal(Object(r.jsx)("div",{className:"error-snack ".concat(t?"show":""),children:Object(r.jsx)("div",{className:"error-snack__message",children:t})}),document.getElementById("error-hook"))}),w=[{title:"Things I Loves",icon:"heart",id:"things_love"},{title:"Things I dislike",icon:"dislike",id:"things_dislike"},{title:"Things I wants to improves",icon:"improve",id:"things_improve"},{title:"New things I have",icon:"innovation",id:"things_new"}],y=window.innerWidth/2,C=function(){var e=Object(o.g)().gid,t=Object(c.useRef)(null),n=g(e),s=n.isLoading,a=n.findCol,l=n.onColUpdate,u=n.errorMessage,d=Object(c.useCallback)((function(e){var n=t.current.scrollLeft,c=n%window.innerWidth,i=Math.floor(n/window.innerWidth);c>y?t.current.scrollTo({left:(i+1)*window.innerWidth,behavior:"smooth"}):t.current.scrollTo({left:i*window.innerWidth,behavior:"smooth"})}),[]);return i.a.useEffect((function(){t.current.addEventListener("touchend",d),t.current.scrollLeft=0}),[d]),Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)("div",{className:"grid",ref:t,children:s?Object(r.jsx)("div",{className:"loader"}):w.map((function(e){return Object(r.jsx)(v,{title:e.title,icon:e.icon,onUpdate:function(t){return l(e.id,t)},feedbacks:a(e.id)},e.id)}))}),Object(r.jsx)(N,{error:u})]})};t.default=function(){return Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(s,{}),Object(r.jsx)(C,{})]})}}}]);
//# sourceMappingURL=3.97347d8e.chunk.js.map