(this["webpackJsonpfeedback-grid"]=this["webpackJsonpfeedback-grid"]||[]).push([[4],{30:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var c=function(){return Math.random().toString(36).substr(2,9)},i=function(){var e=localStorage.getItem("myUid");if(e)return e;var t=c();return localStorage.setItem("myUid",t),t}},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),s=n(10),o=n(1),r=n(38),a=n(4),l=(n(40),function(e){return new RegExp("^[^A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]").test(e)}),u=n(2),d="/assets/icons/",j=function(e){var t=e.className,n=e.onNew,i=Object(c.useState)(!1),s=Object(a.a)(i,2),o=s[0],r=s[1],j=Object(c.useRef)(null),f=Object(c.useState)(""),b=Object(a.a)(f,2),h=b[0],O=b[1],v=function(e){e.preventDefault(),e.stopPropagation(),n(h),O("")};return Object(u.jsxs)("div",{className:"wrapper ".concat(t),children:[Object(u.jsx)("div",{className:"input-wrapper ".concat(o?"open":""),children:Object(u.jsx)("input",{type:"text",style:{direction:l(h)?"rtl":"ltr"},ref:j,placeholder:"Add new item",value:h,onKeyUp:function(e){13===e.keyCode&&v(e)},onChange:function(e){O(e.target.value)},onBlur:function(){return setTimeout((function(){return r(!1)}),200)},className:"c-input"})}),o?Object(u.jsx)("img",{src:"".concat(d,"send.png"),alt:"",onMouseDown:v,className:"send-btn"}):Object(u.jsx)("img",{src:"".concat(d,"plus.png"),alt:"",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),r(!0),j.current.focus()},className:"new-btn"})]})},f=(n(41),n(42),"/assets/icons/"),b=function(e){var t=e.dislikes,n=e.loves,c=e.celebrates,i=e.evils,s=e.onPick;return Object(u.jsxs)("div",{className:"reactions",children:[Object(u.jsxs)("div",{className:"reaction",onClick:function(){return s("loves")},children:[Object(u.jsx)("span",{children:n}),Object(u.jsx)("img",{src:"".concat(f,"heart-color.png"),alt:"heart"})]}),Object(u.jsxs)("div",{className:"reaction",onClick:function(){return s("dislikes")},children:[Object(u.jsx)("span",{children:t}),Object(u.jsx)("img",{src:"".concat(f,"dislike-color.png"),alt:"dislike"})]}),Object(u.jsxs)("div",{className:"reaction",onClick:function(){return s("celebrates")},children:[Object(u.jsx)("span",{children:c}),Object(u.jsx)("img",{src:"".concat(f,"confetti-color.png"),alt:"confetti"})]}),Object(u.jsxs)("div",{className:"reaction",onClick:function(){return s("evils")},children:[Object(u.jsx)("span",{children:i}),Object(u.jsx)("img",{src:"".concat(f,"devil-color.png"),alt:"evil"})]})]})},h=n(30),O=function(e){var t=e.value,n=e.reactions,c=e.onReaction,s=e.createdBy,o=e.onDelete,r=i.a.useState(""),d=Object(a.a)(r,2),j=d[0],f=d[1];return Object(u.jsxs)("div",{className:"card",children:[s===Object(h.b)()&&Object(u.jsx)("div",{className:"card-remove",onClick:o,style:{right:l(t)?"unset":"1rem",left:l(t)?"1rem":"unset"},children:"x"}),Object(u.jsx)("div",{className:"card-body ".concat(l(t)?"rtl":""),children:t}),Object(u.jsx)("hr",{}),Object(u.jsx)("div",{className:"card-footer",children:Object(u.jsx)(b,{evils:n.evils,dislikes:n.dislikes,loves:n.loves,onPick:function(e){""!==j&&n[j]--,n[e]++,f(e),c(n)},celebrates:n.celebrates})})]})},v=(n(43),function(e){var t=e.title,n=e.icon,i=e.onUpdate,s=e.feedbacks,o=void 0===s?[]:s,a=Object(c.useRef)(null);return Object(u.jsxs)("div",{className:"col",children:[Object(u.jsxs)("div",{className:"top",children:[Object(u.jsx)("img",{src:"".concat("/assets/icons/").concat(n,".png"),alt:"",className:"icon"}),Object(u.jsx)("div",{className:"title",children:t})]}),Object(u.jsx)("div",{className:"body",ref:a,children:o.map((function(e,t){return Object(u.jsx)(O,{value:e.value,onDelete:function(){return function(e){var t=Object(r.a)(o);t.splice(e,1),i(t)}(t)},createdBy:e.createBy,reactions:e.reactions,onReaction:function(e){return function(e,t){var n=Object(r.a)(o);n[t].reactions[e]=n[t].reactions[e]+1,i(n)}(e,t)}},t)}))}),Object(u.jsx)("div",{className:"footer",children:Object(u.jsx)(j,{className:"add-input",onNew:function(e){if(""!==e){var t={value:e,createBy:Object(h.b)(),reactions:{evils:0,dislikes:0,loves:0,celebrates:0}},n=o.concat(t);setTimeout((function(){a.current.scrollTop=a.current.scrollHeight})),i(n)}}})})]})}),m=(n(44),n(54)),p=Object(m.a)("https://feedback-grid.herokuapp.com"),g=function(e){var t=Object(c.useState)(),n=Object(a.a)(t,2),i=n[0],s=n[1],l=Object(c.useState)([]),u=Object(a.a)(l,2),d=u[0],j=u[1],f=Object(c.useState)(!0),b=Object(a.a)(f,2),h=b[0],O=b[1],v=Object(c.useState)(),m=Object(a.a)(v,2),g=m[0],x=m[1],k=new URLSearchParams(Object(o.e)().search).get("mode"),N=Object(o.f)(),w=Object(c.useCallback)((function(e){fetch("".concat("https://feedback-grid.herokuapp.com","/api/grid/").concat(e)).then((function(e){return e.json()})).then((function(e){j(e.grid.cols)})).catch((function(e){"new"===k?S("We Could not fetch grid, please check you connection"):"join"===k&&N("/")})).finally((function(){return O(!1)}))}),[k,N]),y=Object(c.useCallback)((function(){null!==e?(s(e),w(e),p.emit("joinRoom",e),p.on("fetchGrid",(function(t){p.id!==t&&w(e)}))):S("Grid not found")}),[e,w]);Object(c.useEffect)((function(){y()}),[y]);var C=Object(c.useCallback)((function(e,t){var n=d,c=n.find((function(t){return t.name===e}));c&&(j(Object(r.a)(n)),c.feedbacks=t,fetch("".concat("https://feedback-grid.herokuapp.com","/api/grid/").concat(i),{method:"POST",body:JSON.stringify({grid:{cols:n}}),headers:{"Content-Type":"application/json"}}).then((function(e){p.emit("fetchGridRequest",i)})).catch((function(e){return console.log(e)})))}),[d,i]),S=function(e){x(e),setTimeout((function(){x(null)}),3e3)};return{isLoading:h,findCol:function(e){var t=d.find((function(t){return t.name===e}));return t?t.feedbacks:[]},onColUpdate:C,errorMessage:g}},x=n(12),k=[{title:"Things I Loves",icon:"heart",id:"things_love"},{title:"Things I dislike",icon:"dislike",id:"things_dislike"},{title:"Things I wants to improves",icon:"improve",id:"things_improve"},{title:"New things I have",icon:"innovation",id:"things_new"}],N=window.innerWidth/2,w=function(){var e=Object(o.g)().gid,t=Object(c.useRef)(null),n=g(e),s=n.isLoading,r=n.findCol,a=n.onColUpdate,l=n.errorMessage,d=Object(c.useCallback)((function(e){var n=t.current.scrollLeft,c=n%window.innerWidth,i=Math.floor(n/window.innerWidth);c>N?t.current.scrollTo({left:(i+1)*window.innerWidth,behavior:"smooth"}):t.current.scrollTo({left:i*window.innerWidth,behavior:"smooth"})}),[]);return i.a.useEffect((function(){t.current.addEventListener("touchend",d),t.current.scrollLeft=0}),[d]),Object(u.jsxs)(i.a.Fragment,{children:[Object(u.jsx)("div",{className:"grid",ref:t,children:s?Object(u.jsx)("div",{className:"loader"}):k.map((function(e){return Object(u.jsx)(v,{title:e.title,icon:e.icon,onUpdate:function(t){return a(e.id,t)},feedbacks:r(e.id)},e.id)}))}),Object(u.jsx)(x.a,{error:l})]})};t.default=function(){return Object(u.jsxs)(i.a.Fragment,{children:[Object(u.jsx)(s.a,{}),Object(u.jsx)(w,{})]})}}}]);
//# sourceMappingURL=4.c873e41c.chunk.js.map